(()=>{"use strict";const t=function(t){let e=document.createElement(t.tag);if("attr"in t){let a=t.attr;for(let[t,n]of Object.entries(a))e.setAttribute(t,n)}return null!=t.classList&&e.classList.add(...t.classList),"text"in t&&(e.textContent=t.text),e},e=function(){const n=Object.keys(localStorage).reverse(),s=document.querySelector(".project-items");let i=document.querySelector(".selected");i=null===i||"Home"===i.id?"":i.textContent,s.innerHTML="",n.forEach((a=>{if("Home"===a)return;let n=t({tag:"div",classList:["project-item"]}),r=t({tag:"i",classList:["fa","fa-times","sm","remove-p-item"]}),l=t({tag:"div",classList:["project-name"],text:a});i===a&&l.classList.add("selected"),r.addEventListener("click",(t=>{localStorage.removeItem(a);let n=document.querySelector(".selected");n=n.textContent,n===a&&(document.querySelector(".main-container").innerHTML=""),e()})),n.append(l,r),s.appendChild(n)})),a()},a=function(){const e=document.querySelector("#projects"),a=document.querySelectorAll(".project-name"),i=document.querySelector("#home");i.addEventListener("click",n.bind(null,i)),a.forEach((t=>{t.addEventListener("click",n.bind(null,t))})),e.addEventListener("click",(e=>{document.querySelector(".overlay")||(container.appendChild(function(){const e=t({tag:"div",classList:["p-form-buttons"]}),a=t({tag:"button",text:"Cancel",classList:["cancel-btn"]});a.addEventListener("click",(t=>{document.querySelector(".overlay").remove()})),e.append(a,t({tag:"button",text:"Okay",classList:["submit-btn"]}));const n=t({tag:"div",classList:["project-form"]});n.append(t({tag:"div",text:"Create New Project",classList:["p-form-heading"]}),t({tag:"input",attr:{type:"text",placeholder:"Project Name"},classList:["p-form-text"]}),e);let s=t({tag:"div",classList:["overlay"]});return s.append(n),s}()),s())}))},n=function(t,e){let a=document.querySelector(".selected");t!==a&&(null!=a&&a.classList.remove("selected"),t.classList.add("selected"),"home"===t.id?r("Home"):r(t.textContent))},s=function(){document.querySelector(".submit-btn").addEventListener("click",i)};function i(t){let a=document.querySelector(".p-form-text").value;a=a.charAt(0).toUpperCase()+a.slice(1),""!==a?a.length>12?alert("Value too big"):(document.querySelector(".overlay").remove(),null===localStorage.getItem(a)?(localStorage.setItem(a,""),e()):alert("Project already exists.")):alert("Please enter a value")}const r=function(e){const a=document.querySelector(".main-container");if(null===localStorage.getItem(e))return void alert("Page does not exist.");a.innerHTML="";let n=t({tag:"div",classList:["header"]}),s=t({tag:"div",classList:["main-heading"],text:e}),i=t({tag:"button",text:"New Task",classList:["new-task-btn"]});i.addEventListener("click",l),n.append(s,i),a.appendChild(n)},l=function(){container.appendChild(function(){const e=t({tag:"div",classList:["t-form-buttons"]}),a=t({tag:"button",text:"Cancel",classList:["cancel-btn","b"]});a.addEventListener("click",(t=>{document.querySelector(".overlay").remove()})),e.append(a,t({tag:"button",text:"Create",attr:{for:"task-form"},classList:["t-submit-btn","b"]}));const n=t({tag:"div",classList:["task-form"]}),s=t({tag:"label",text:"Title:"});s.append(t({tag:"input",attr:{type:"text",required:""},classList:["t-title"]}));const i=t({tag:"label",text:"Description:"});i.append(t({tag:"textarea",attr:{rows:"4",required:""},classList:["t-description"]}));const r=t({tag:"label",classList:["m"]});r.innerHTML='Priority:\n   <input id="low" type="radio" name="priority" value="low" checked>\n   <label class="r" for="low">Low</label>\n   <input id="medium" type="radio" name="priority" value="medium">\n   <label class="r" for="medium">Medium</label>\n   <input id="high" type="radio" name="priority" value="high">\n   <label class="r" for="high">High</label>';const l=t({tag:"label",text:"Due Date:",classList:["m"]});l.append(t({tag:"input",attr:{type:"date",required:""}}));const c=t({tag:"form",classList:["t-content"],attr:{id:"task-form"}});c.append(s,i,r,l,e),n.append(t({tag:"div",text:"Create a new task:",classList:["t-form-heading"]}),c);let o=t({tag:"div",classList:["overlay"]});return o.append(n),o}())},c=function(){let e=t({tag:"div",classList:["nav-bar"]});return e.append(t({tag:"i",classList:["fa","fa-tasks","fa-3x"],attr:{"aria-hidden":"true"}}),t({tag:"div",classList:["nav-heading"],text:"To-Do"}),t({tag:"div",classList:["nav-side"],text:"Tasks and Notes"})),e},o=function(){let e=t({tag:"div",classList:["side-bar"]});return e.append(d("home","Home"),d("briefcase","Projects")),e},d=function(e,a){let n=t({tag:"div",attr:{id:a.toLowerCase()},classList:["side-item"]});if(n.append(t({tag:"i",classList:["fa",`fa-${e}`],attr:{"aria-hidden":"true"}}),t({tag:"span",text:a})),"Projects"===a){let e=t({tag:"div"});return e.append(n,t({tag:"div",classList:["project-items"]})),e}return n};!function(){const a=document.querySelector("#container");[c(),o(),t({tag:"div",classList:["main-container"]})].forEach((t=>{a.appendChild(t)})),document.querySelector("#home").classList.add("selected"),null===localStorage.getItem("Home")&&localStorage.setItem("Home",""),e(),r("Home")}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFHVHVFLEVBR1gsT0FBT0YsSUFuR1ksV0FDbkIsTUFBTXZDLEVBQVl4QyxTQUFTb0IsY0FBYyxjQUMzQixDQUFDcUQsSUFBZ0JFLElBQzNCOUUsRUFBYyxDQUNkSSxJQUFLLE1BQ0xTLFVBQVcsQ0FBQyxxQkFHVmMsU0FBUWUsSUFDVkMsRUFBVVAsWUFBWU0sTUFHMUJ2QyxTQUFTb0IsY0FBYyxTQUFTVixVQUFVQyxJQUFJLFlBQ1QsT0FBakNNLGFBQWF3QyxRQUFRLFNBQ3JCeEMsYUFBYXlDLFFBQVEsT0FBUSxJRmJqQzVDLElBQ0FtQyxFRWVXLFFDbkJmaUMsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLW9kaW4vLi9zcmMvbW9kdWxlcy9jcmVhdGVFbGVtZW50LmpzIiwid2VicGFjazovL3RvLWRvLW9kaW4vLi9zcmMvbW9kdWxlcy9yZWZyZXNoRE9NLmpzIiwid2VicGFjazovL3RvLWRvLW9kaW4vLi9zcmMvbW9kdWxlcy9wcm9qZWN0Rm9ybS5qcyIsIndlYnBhY2s6Ly90by1kby1vZGluLy4vc3JjL21vZHVsZXMvaW5pdGlhbGl6ZVBhZ2UuanMiLCJ3ZWJwYWNrOi8vdG8tZG8tb2Rpbi8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG9iai50YWcpXG5cbiAgICBpZiAoXCJhdHRyXCIgaW4gb2JqKSB7XG4gICAgICAgIGxldCBhdHRyT2JqID0gb2JqLmF0dHJcbiAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGF0dHJPYmopKSB7XG4gICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvYmouY2xhc3NMaXN0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4ub2JqLmNsYXNzTGlzdClcbiAgICB9XG5cbiAgICBpZiAoXCJ0ZXh0XCIgaW4gb2JqKSB7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBvYmoudGV4dFxuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50XG59XG5cbmV4cG9ydCB7XG4gICAgY3JlYXRlRWxlbWVudFxufSIsImltcG9ydCB7IGNyZWF0ZUVsZW1lbnQgfSBmcm9tIFwiLi9jcmVhdGVFbGVtZW50LmpzXCI7XG5pbXBvcnQgeyBwcm9qZWN0Rm9ybSwgdGFza0Zvcm0gfSBmcm9tIFwiLi9wcm9qZWN0Rm9ybS5qc1wiXG5cbmNvbnN0IHJlZnJlc2hET00gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgLy8gaXRlbXMuZm9yRWFjaChpdGVtID0+IGNvbnNvbGUubG9nKEpTT04ucGFyc2UoaXRlbSkpKVxuICAgIHJlZnJlc2hQcm9qZWN0cygpO1xuICAgIGxvYWRQYWdlKG5hbWUpO1xufVxuXG5jb25zdCByZWZyZXNoUHJvamVjdHMgPSBmdW5jdGlvbigpIHtcblxuICAgIGNvbnN0IHByb2plY3RzID0gT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5yZXZlcnNlKCk7XG4gICAgY29uc3QgcHJvamVjdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LWl0ZW1zXCIpO1xuICAgIGxldCBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWRcIik7XG5cbiAgICBpZiAoc2VsZWN0ZWQgPT09IG51bGwgfHwgc2VsZWN0ZWQuaWQgPT09IFwiSG9tZVwiKSB7XG4gICAgICAgIHNlbGVjdGVkID0gXCJcIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkID0gc2VsZWN0ZWQudGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgcHJvamVjdEl0ZW1zLmlubmVySFRNTCA9IFwiXCI7XG4gICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgaWYoIHByb2plY3QgPT09IFwiSG9tZVwiKSByZXR1cm47XG4gICAgICAgIGxldCBwcm9qZWN0SXRlbSA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICAgICAgY2xhc3NMaXN0OiBbXCJwcm9qZWN0LWl0ZW1cIl0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCByZW1vdmVJY29uID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICB0YWc6IFwiaVwiLFxuICAgICAgICAgICAgY2xhc3NMaXN0OiBbXCJmYVwiLCBcImZhLXRpbWVzXCIsIFwic21cIiwgXCJyZW1vdmUtcC1pdGVtXCJdLFxuICAgICAgICB9KVxuXG4gICAgICAgIGxldCBwcm9qZWN0TmFtZSA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICAgICAgY2xhc3NMaXN0OiBbXCJwcm9qZWN0LW5hbWVcIl0sXG4gICAgICAgICAgICB0ZXh0OiBwcm9qZWN0LFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmIChzZWxlY3RlZCA9PT0gcHJvamVjdCkge1xuICAgICAgICAgICAgcHJvamVjdE5hbWUuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVtb3ZlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShwcm9qZWN0KTtcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWRcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlbGVjdGVkID0gc2VsZWN0ZWQudGV4dENvbnRlbnRcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkID09PSBwcm9qZWN0KSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNvbnRhaW5lclwiKS5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVmcmVzaFByb2plY3RzKClcbiAgICAgICAgfSlcblxuICAgICAgICBwcm9qZWN0SXRlbS5hcHBlbmQoIHByb2plY3ROYW1lLCByZW1vdmVJY29uKVxuXG4gICAgICAgIHByb2plY3RJdGVtcy5hcHBlbmRDaGlsZChwcm9qZWN0SXRlbSlcbiAgICB9KVxuXG4gICAgY2hhbmdlUGFnZSgpO1xufVxuXG5jb25zdCBjaGFuZ2VQYWdlID0gZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdHNcIik7XG4gICAgY29uc3QgcHJvamVjdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0LW5hbWVcIik7XG4gICAgY29uc3QgaG9tZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaG9tZVwiKTtcblxuICAgIGhvbWUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGl0ZW1TZWxlY3Rpb24uYmluZChudWxsLCBob21lKSlcblxuICAgIHByb2plY3RJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBpdGVtU2VsZWN0aW9uLmJpbmQobnVsbCwgaXRlbSkpfSlcblxuICAgIHByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKSkgcmV0dXJuO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJvamVjdEZvcm0oKSk7XG4gICAgICAgIGFkZFByb2plY3QoKTtcbiAgICB9KVxufVxuXG5jb25zdCBpdGVtU2VsZWN0aW9uID0gZnVuY3Rpb24oaXRlbSwgZSkge1xuICAgIGxldCBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWRcIik7XG4gICAgaWYgKGl0ZW0gPT09IHNlbGVjdGVkKSByZXR1cm47XG4gICAgaWYgKHNlbGVjdGVkICE9IG51bGwpIHtcbiAgICAgICAgc2VsZWN0ZWQuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkXCIpO1xuICAgIH1cbiAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICBpZiAoaXRlbS5pZCA9PT0gXCJob21lXCIpIHtcbiAgICAgICAgbG9hZFBhZ2UoXCJIb21lXCIpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsb2FkUGFnZShpdGVtLnRleHRDb250ZW50KTtcbiAgICB9XG59XG5cbmNvbnN0IGFkZFByb2plY3QgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdC1idG5cIik7XG4gICAgc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVGb3JtKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtKGUpIHtcblxuICAgIGxldCBuYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wLWZvcm0tdGV4dFwiKS52YWx1ZTtcbiAgICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gICAgaWYgKG5hbWUgPT09IFwiXCIpIHtcbiAgICAgICAgYWxlcnQoXCJQbGVhc2UgZW50ZXIgYSB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGVsc2UgaWYgKG5hbWUubGVuZ3RoID4gMTIpIHtcbiAgICAgICAgYWxlcnQoXCJWYWx1ZSB0b28gYmlnXCIpXG4gICAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKS5yZW1vdmUoKTtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSkgPT09IG51bGwpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obmFtZSwgXCJcIik7XG4gICAgICAgIHJlZnJlc2hQcm9qZWN0cygpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYWxlcnQoXCJQcm9qZWN0IGFscmVhZHkgZXhpc3RzLlwiKTtcbiAgICB9XG5cbn1cblxuY29uc3QgbG9hZFBhZ2UgPSBmdW5jdGlvbihpZCkge1xuICAgIGNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tY29udGFpbmVyXCIpO1xuICAgIGxldCBwYWdlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oaWQpO1xuICAgIGlmIChwYWdlID09PSBudWxsKSB7XG4gICAgICAgIGFsZXJ0KFwiUGFnZSBkb2VzIG5vdCBleGlzdC5cIik7XG4gICAgICAgIHJldHVyblxuICAgIH07XG5cbiAgICBtYWluQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG5cbiAgICBsZXQgaGVhZGVyID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzpcImRpdlwiLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcImhlYWRlclwiXVxuICAgIH0pXG5cbiAgICBsZXQgaGVhZGluZyA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiZGl2XCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1wibWFpbi1oZWFkaW5nXCJdLFxuICAgICAgICB0ZXh0OiBpZCxcbiAgICB9KVxuXG4gICAgbGV0IGJ1dHRvbiA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiYnV0dG9uXCIsXG4gICAgICAgIHRleHQ6IFwiTmV3IFRhc2tcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJuZXctdGFzay1idG5cIl0sXG4gICAgfSk7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNyZWF0ZU5ld1Rhc2spXG4gICAgaGVhZGVyLmFwcGVuZCggaGVhZGluZywgYnV0dG9uKVxuXG4gICAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpXG5cblxufVxuXG5jb25zdCBjcmVhdGVOZXdUYXNrID0gZnVuY3Rpb24oKSB7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRhc2tGb3JtKCkpO1xufVxuXG5jbGFzcyBQcm9qZWN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgdGhpcy50YXNrcyA9IFtdO1xuICAgIH1cblxuICAgIGFwcGVuZFRhc2tzKHRhc2spIHtcbiAgICAgICAgdGFza3MucHVzaCh0YXNrKVxuICAgIH1cbn1cblxuY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IodCwgZCwgZERhdGUsIHApIHtcbiAgICAgICAgdGhpcy50aXRsZSA9IHQ7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkO1xuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHA7XG4gICAgfVxuXG4gICAgZ2V0IHRpdGxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGl0bGU7XG4gICAgfVxuXG4gICAgc2V0IHRpdGxlKHQpIHtcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0O1xuICAgIH1cblxuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xuICAgIH1cblxuICAgIHNldCBkZXNjcmlwdGlvbihkKSB7XG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZDtcbiAgICB9XG5cbiAgICBnZXQgZHVlRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2R1ZURhdGU7XG4gICAgfVxuXG4gICAgc2V0IGR1ZURhdGUoZERhdGUpIHtcbiAgICAgICAgdGhpcy5fZHVlRGF0ZSA9IGREYXRlO1xuICAgIH1cblxuICAgIGdldCBwcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xuICAgIH1cblxuICAgIHNldCBwcmlvcml0eShwKSB7XG4gICAgICAgIHRoaXMuX3ByaW9yaXR5ID0gcDtcbiAgICB9XG59XG5cbmV4cG9ydCB7cmVmcmVzaERPTX0iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudC5qc1wiXG5cbmNvbnN0IHByb2plY3RGb3JtID0gZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBidXR0b25zID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJwLWZvcm0tYnV0dG9uc1wiXSwgXG4gICAgfSlcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiYnV0dG9uXCIsXG4gICAgICAgIHRleHQ6IFwiQ2FuY2VsXCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1wiY2FuY2VsLWJ0blwiXSwgXG4gICAgfSlcblxuXG4gICAgY2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+e1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIikucmVtb3ZlKCk7XG4gICAgfSlcbiAgICBcbiAgICBidXR0b25zLmFwcGVuZCggY2FuY2VsQnRuLCBjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImJ1dHRvblwiLFxuICAgICAgICB0ZXh0OiBcIk9rYXlcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJzdWJtaXQtYnRuXCJdLCBcbiAgICB9KSlcblxuICAgIGNvbnN0IHByb2plY3RGb3JtID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJwcm9qZWN0LWZvcm1cIl0sIFxuICAgIH0pXG4gICAgXG4gICAgcHJvamVjdEZvcm0uYXBwZW5kKGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiZGl2XCIsXG4gICAgICAgIHRleHQ6IFwiQ3JlYXRlIE5ldyBQcm9qZWN0XCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1wicC1mb3JtLWhlYWRpbmdcIl0sIFxuICAgIH0pLCBcbiAgICBcbiAgICBjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImlucHV0XCIsXG4gICAgICAgIGF0dHI6e1xuICAgICAgICAgICAgdHlwZSA6IFwidGV4dFwiLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6IFwiUHJvamVjdCBOYW1lXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzTGlzdDogW1wicC1mb3JtLXRleHRcIl0sIFxuICAgIH0pLCBidXR0b25zKVxuXG4gICAgbGV0IG92ZXJsYXkgPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcIm92ZXJsYXlcIl0sIFxuICAgIH0pXG4gICAgXG4gICAgb3ZlcmxheS5hcHBlbmQocHJvamVjdEZvcm0pO1xuXG4gICAgcmV0dXJuIG92ZXJsYXk7XG59XG5cbmNvbnN0IHRhc2tGb3JtID0gZnVuY3Rpb24oKSB7XG5cbiAgICBjb25zdCBidXR0b25zID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJ0LWZvcm0tYnV0dG9uc1wiXSwgXG4gICAgfSlcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiYnV0dG9uXCIsXG4gICAgICAgIHRleHQ6IFwiQ2FuY2VsXCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1wiY2FuY2VsLWJ0blwiLCBcImJcIl0sIFxuICAgIH0pXG5cbiAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT57XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKS5yZW1vdmUoKTtcbiAgICB9KVxuICAgIFxuICAgIGJ1dHRvbnMuYXBwZW5kKCBjYW5jZWxCdG4sIGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiYnV0dG9uXCIsXG4gICAgICAgIHRleHQ6IFwiQ3JlYXRlXCIsXG4gICAgICAgIGF0dHI6IHtmb3I6IFwidGFzay1mb3JtXCJ9LFxuICAgICAgICBjbGFzc0xpc3Q6IFtcInQtc3VibWl0LWJ0blwiLCBcImJcIl0sIFxuICAgIH0pKVxuXG4gICAgY29uc3QgdGFza0Zvcm0gPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcInRhc2stZm9ybVwiXSwgXG4gICAgfSlcblxuICAgIGNvbnN0IHRpdGxlID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJsYWJlbFwiLFxuICAgICAgICB0ZXh0OiBcIlRpdGxlOlwiXG4gICAgfSlcblxuICAgIHRpdGxlLmFwcGVuZChjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImlucHV0XCIsXG4gICAgICAgIGF0dHI6e1xuICAgICAgICAgICAgdHlwZSA6IFwidGV4dFwiLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJ0LXRpdGxlXCJdLCBcbiAgICB9KSlcblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJsYWJlbFwiLFxuICAgICAgICB0ZXh0OiBcIkRlc2NyaXB0aW9uOlwiXG4gICAgfSlcblxuICAgIGRlc2NyaXB0aW9uLmFwcGVuZChjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcInRleHRhcmVhXCIsXG4gICAgICAgIGF0dHI6e1xuICAgICAgICAgICAgcm93cyA6IFwiNFwiLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IFwiXCJcbiAgICAgICAgfSxcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJ0LWRlc2NyaXB0aW9uXCJdLCBcbiAgICB9KSlcblxuICAgIGNvbnN0IHByaW9yaXR5ID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJsYWJlbFwiLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcIm1cIl0sXG4gICAgfSlcblxuICAgIHByaW9yaXR5LmlubmVySFRNTCA9IGBQcmlvcml0eTpcbiAgIDxpbnB1dCBpZD1cImxvd1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJwcmlvcml0eVwiIHZhbHVlPVwibG93XCIgY2hlY2tlZD5cbiAgIDxsYWJlbCBjbGFzcz1cInJcIiBmb3I9XCJsb3dcIj5Mb3c8L2xhYmVsPlxuICAgPGlucHV0IGlkPVwibWVkaXVtXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cInByaW9yaXR5XCIgdmFsdWU9XCJtZWRpdW1cIj5cbiAgIDxsYWJlbCBjbGFzcz1cInJcIiBmb3I9XCJtZWRpdW1cIj5NZWRpdW08L2xhYmVsPlxuICAgPGlucHV0IGlkPVwiaGlnaFwiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJwcmlvcml0eVwiIHZhbHVlPVwiaGlnaFwiPlxuICAgPGxhYmVsIGNsYXNzPVwiclwiIGZvcj1cImhpZ2hcIj5IaWdoPC9sYWJlbD5gXG5cbiAgICBjb25zdCBkdWVEYXRlID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJsYWJlbFwiLFxuICAgICAgICB0ZXh0OiBcIkR1ZSBEYXRlOlwiLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcIm1cIl0sXG4gICAgfSlcblxuICAgIGR1ZURhdGUuYXBwZW5kKGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6XCJpbnB1dFwiLFxuICAgICAgICBhdHRyOiB7dHlwZTpcImRhdGVcIiwgcmVxdWlyZWQ6XCJcIn0sXG4gICAgfSkpXG5cbiAgICBjb25zdCBmb3JtQ29udGVudCA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6XCJmb3JtXCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1widC1jb250ZW50XCJdLFxuICAgICAgICBhdHRyOntpZDpcInRhc2stZm9ybVwifSxcbiAgICB9KVxuXG4gICAgZm9ybUNvbnRlbnQuYXBwZW5kKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpb3JpdHksIGR1ZURhdGUsIGJ1dHRvbnMpO1xuICAgIFxuICAgIHRhc2tGb3JtLmFwcGVuZChjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICB0ZXh0OiBcIkNyZWF0ZSBhIG5ldyB0YXNrOlwiLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcInQtZm9ybS1oZWFkaW5nXCJdLCBcbiAgICB9KSwgZm9ybUNvbnRlbnQpXG5cbiAgICBsZXQgb3ZlcmxheSA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICB0YWc6IFwiZGl2XCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1wib3ZlcmxheVwiXSwgXG4gICAgfSlcbiAgICBcbiAgICBvdmVybGF5LmFwcGVuZCh0YXNrRm9ybSk7XG5cbiAgICByZXR1cm4gb3ZlcmxheTtcbn1cblxuZXhwb3J0IHtcbiAgICBwcm9qZWN0Rm9ybSwgdGFza0Zvcm1cbn0iLCJpbXBvcnQgeyBjcmVhdGVFbGVtZW50IH0gZnJvbSBcIi4vY3JlYXRlRWxlbWVudC5qc1wiXG5pbXBvcnQgeyByZWZyZXNoRE9NIH0gZnJvbSBcIi4vcmVmcmVzaERPTS5qc1wiXG5cblxuY29uc3QgaW5pdGlhbGl6ZVBhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NvbnRhaW5lclwiKTtcbiAgICBjb25zdCBpdGVtcyA9IFtjcmVhdGVOYXZiYXIoKSwgY3JlYXRlU2lkZWJhcigpLCBcbiAgICAgICAgY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJtYWluLWNvbnRhaW5lclwiXSxcbiAgICAgICAgfVxuICAgICldXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgIH0pXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2hvbWVcIikuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIkhvbWVcIikgPT09IG51bGwpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJIb21lXCIsIFwiXCIpXG4gICAgfVxuXG4gICAgcmVmcmVzaERPTShcIkhvbWVcIik7XG59O1xuXG5jb25zdCBjcmVhdGVOYXZiYXIgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgbmF2QmFyID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJuYXYtYmFyXCJdLFxuICAgIH0pXG4gICAgXG4gICAgbmF2QmFyLmFwcGVuZChcbiAgICAgICAgY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICB0YWc6IFwiaVwiLFxuICAgICAgICAgICAgY2xhc3NMaXN0OiBbXCJmYVwiLCBcImZhLXRhc2tzXCIsIFwiZmEtM3hcIl0sXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICB0YWc6IFwiZGl2XCIsXG4gICAgICAgICAgICBjbGFzc0xpc3Q6IFtcIm5hdi1oZWFkaW5nXCJdLFxuICAgICAgICAgICAgdGV4dDogXCJUby1Eb1wiXG4gICAgICAgIH0pLFxuICAgICAgICBjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgICAgIGNsYXNzTGlzdDogW1wibmF2LXNpZGVcIl0sXG4gICAgICAgICAgICB0ZXh0OiBcIlRhc2tzIGFuZCBOb3Rlc1wiXG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIHJldHVybiBuYXZCYXI7XG59XG5cblxuY29uc3QgY3JlYXRlU2lkZWJhciA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBzaWRlQmFyID0gY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJkaXZcIixcbiAgICAgICAgY2xhc3NMaXN0OiBbXCJzaWRlLWJhclwiXSxcbiAgICB9KVxuXG4gICAgc2lkZUJhci5hcHBlbmQoXG4gICAgICAgIGNyZWF0ZVNpZGVJdGVtKFwiaG9tZVwiLCBcIkhvbWVcIiksIFxuICAgICAgICBjcmVhdGVTaWRlSXRlbShcImJyaWVmY2FzZVwiLCBcIlByb2plY3RzXCIpLCBcbiAgICApXG5cbiAgICByZXR1cm4gc2lkZUJhcjtcbn1cblxuY29uc3QgY3JlYXRlU2lkZUl0ZW0gPSBmdW5jdGlvbihpY29uLCB0ZXh0KSB7XG5cbiAgICBsZXQgc2lkZUl0ZW0gPSBjcmVhdGVFbGVtZW50KHtcbiAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICBpZDogdGV4dC50b0xvd2VyQ2FzZSgpXG4gICAgICAgIH0sXG4gICAgICAgIGNsYXNzTGlzdDogW1wic2lkZS1pdGVtXCJdLFxuICAgIH0pXG5cbiAgICBzaWRlSXRlbS5hcHBlbmQoY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJpXCIsXG4gICAgICAgIGNsYXNzTGlzdDogW1wiZmFcIiwgYGZhLSR7aWNvbn1gXSxcbiAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgXCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxuICAgICAgICB9XG4gICAgfSksXG4gICAgY3JlYXRlRWxlbWVudCh7XG4gICAgICAgIHRhZzogXCJzcGFuXCIsXG4gICAgICAgIHRleHQ6IHRleHRcbiAgICB9KSlcblxuICAgIGlmICh0ZXh0ID09PSBcIlByb2plY3RzXCIpIHtcbiAgICAgICAgbGV0IGRpdiA9IGNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgdGFnOiBcImRpdlwiLFxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgZGl2LmFwcGVuZChzaWRlSXRlbSwgY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICB0YWc6IFwiZGl2XCIsXG4gICAgICAgICAgICBjbGFzc0xpc3Q6IFtcInByb2plY3QtaXRlbXNcIl1cbiAgICAgICAgfSkpXG5cbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2lkZUl0ZW1cbn1cblxuZXhwb3J0IHtpbml0aWFsaXplUGFnZX0iLCJpbXBvcnQgeyBpbml0aWFsaXplUGFnZSB9IGZyb20gXCIuL21vZHVsZXMvaW5pdGlhbGl6ZVBhZ2UuanNcIlxuXG5pbml0aWFsaXplUGFnZSgpO1xuXG4iXSwibmFtZXMiOlsiY3JlYXRlRWxlbWVudCIsIm9iaiIsImVsZW1lbnQiLCJkb2N1bWVudCIsInRhZyIsImF0dHJPYmoiLCJhdHRyIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwic2V0QXR0cmlidXRlIiwidW5kZWZpbmVkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ0ZXh0IiwicmVmcmVzaFByb2plY3RzIiwicHJvamVjdHMiLCJrZXlzIiwibG9jYWxTdG9yYWdlIiwicmV2ZXJzZSIsInByb2plY3RJdGVtcyIsInF1ZXJ5U2VsZWN0b3IiLCJzZWxlY3RlZCIsImlkIiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsInByb2plY3QiLCJwcm9qZWN0SXRlbSIsInJlbW92ZUljb24iLCJwcm9qZWN0TmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicmVtb3ZlSXRlbSIsImFwcGVuZCIsImFwcGVuZENoaWxkIiwiY2hhbmdlUGFnZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJob21lIiwiaXRlbVNlbGVjdGlvbiIsImJpbmQiLCJpdGVtIiwiY29udGFpbmVyIiwiYnV0dG9ucyIsImNhbmNlbEJ0biIsInJlbW92ZSIsInByb2plY3RGb3JtIiwidHlwZSIsInBsYWNlaG9sZGVyIiwib3ZlcmxheSIsImFkZFByb2plY3QiLCJsb2FkUGFnZSIsImhhbmRsZUZvcm0iLCJuYW1lIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzbGljZSIsImxlbmd0aCIsImFsZXJ0IiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJtYWluQ29udGFpbmVyIiwiaGVhZGVyIiwiaGVhZGluZyIsImJ1dHRvbiIsImNyZWF0ZU5ld1Rhc2siLCJmb3IiLCJ0YXNrRm9ybSIsInRpdGxlIiwicmVxdWlyZWQiLCJkZXNjcmlwdGlvbiIsInJvd3MiLCJwcmlvcml0eSIsImR1ZURhdGUiLCJmb3JtQ29udGVudCIsImNyZWF0ZU5hdmJhciIsIm5hdkJhciIsImNyZWF0ZVNpZGViYXIiLCJzaWRlQmFyIiwiY3JlYXRlU2lkZUl0ZW0iLCJpY29uIiwic2lkZUl0ZW0iLCJ0b0xvd2VyQ2FzZSIsImRpdiIsImluaXRpYWxpemVQYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==